function getEventHandler(t,e){return"function"==typeof e?e:"object"==typeof e&&"function"==typeof e[t]?e[t]:void 0}!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.geojsonvt=t()}}(function(){return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return r(i?i:t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";function n(t,e,i,n,s,a,u,f){if(i/=e,n/=e,u>=i&&n>=f)return t;if(u>n||i>f)return null;for(var h=[],l=0;l<t.length;l++){var c,p,d=t[l],v=d.geometry,g=d.type;if(c=d.min[s],p=d.max[s],c>=i&&n>=p)h.push(d);else if(!(c>n||i>p)){var y=1===g?r(v,i,n,s):o(v,i,n,s,a,3===g);y.length&&h.push({geometry:y,type:g,tags:t[l].tags||null,min:d.min,max:d.max})}}return h.length?h:null}function r(t,e,i,n){for(var r=[],o=0;o<t.length;o++){var s=t[o],a=s[n];a>=e&&i>=a&&r.push(s)}return r}function o(t,e,i,n,r,o){for(var a=[],u=0;u<t.length;u++){var f,h,l,c=0,p=0,d=null,v=t[u],g=v.area,y=v.dist,m=v.length,x=[];for(h=0;m-1>h;h++)f=d||v[h],d=v[h+1],c=p||f[n],p=d[n],e>c?p>i?(x.push(r(f,d,e),r(f,d,i)),o||(x=s(a,x,g,y))):p>=e&&x.push(r(f,d,e)):c>i?e>p?(x.push(r(f,d,i),r(f,d,e)),o||(x=s(a,x,g,y))):i>=p&&x.push(r(f,d,i)):(x.push(f),e>p?(x.push(r(f,d,e)),o||(x=s(a,x,g,y))):p>i&&(x.push(r(f,d,i)),o||(x=s(a,x,g,y))));f=v[m-1],c=f[n],c>=e&&i>=c&&x.push(f),l=x[x.length-1],o&&l&&(x[0][0]!==l[0]||x[0][1]!==l[1])&&x.push(x[0]),s(a,x,g,y)}return a}function s(t,e,i,n){return e.length&&(e.area=i,e.dist=n,t.push(e)),[]}e.exports=n},{}],2:[function(t,e,i){"use strict";function n(t,e){var i=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)r(i,t.features[n],e);else"Feature"===t.type?r(i,t,e):r(i,{geometry:t},e);return i}function r(t,e,i){var n,u,f,h=e.geometry,l=h.type,c=h.coordinates,p=e.properties;if("Point"===l)t.push(o(p,1,[a(c)]));else if("MultiPoint"===l)t.push(o(p,1,s(c)));else if("LineString"===l)t.push(o(p,2,[s(c,i)]));else if("MultiLineString"===l||"Polygon"===l){for(f=[],n=0;n<c.length;n++)f.push(s(c[n],i));t.push(o(p,"Polygon"===l?3:2,f))}else if("MultiPolygon"===l){for(f=[],n=0;n<c.length;n++)for(u=0;u<c[n].length;u++)f.push(s(c[n][u],i));t.push(o(p,3,f))}else{if("GeometryCollection"!==l)throw new Error("Input data is not a valid GeoJSON object.");for(n=0;n<h.geometries.length;n++)r(t,{geometry:h.geometries[n],properties:p},i)}}function o(t,e,i){var n={geometry:i,type:e,tags:t||null,min:[2,1],max:[-1,0]};return f(n),n}function s(t,e){for(var i=[],n=0;n<t.length;n++)i.push(a(t[n]));return e&&(l(i,e),u(i)),i}function a(t){var e=Math.sin(t[1]*Math.PI/180),i=t[0]/360+.5,n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n=-1>n?-1:n>1?1:n,[i,n,0]}function u(t){for(var e,i,n=0,r=0,o=0;o<t.length-1;o++)e=i||t[o],i=t[o+1],n+=e[0]*i[1]-i[0]*e[1],r+=Math.abs(i[0]-e[0])+Math.abs(i[1]-e[1]);t.area=Math.abs(n/2),t.dist=r}function f(t){var e=t.geometry,i=t.min,n=t.max;if(1===t.type)h(i,n,e);else for(var r=0;r<e.length;r++)h(i,n,e[r]);return t}function h(t,e,i){for(var n,r=0;r<i.length;r++)n=i[r],t[0]=Math.min(n[0],t[0]),e[0]=Math.max(n[0],e[0]),t[1]=Math.min(n[1],t[1]),e[1]=Math.max(n[1],e[1])}e.exports=n;var l=t("./simplify")},{"./simplify":4}],3:[function(t,e,i){"use strict";function n(t,e){return new r(t,e)}function r(t,e){e=this.options=u(Object.create(this.options),e);var i=e.debug;i&&console.time("preprocess data");var n=1<<e.maxZoom,r=h(t,e.tolerance/(n*e.extent));this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=p(r,e.buffer/e.extent,s),r.length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function o(t,e,i){return 32*((1<<t)*i+e)+t}function s(t,e,i){return[i,(i-t[0])*(e[1]-t[1])/(e[0]-t[0])+t[1],1]}function a(t,e,i){return[(i-t[1])*(e[0]-t[0])/(e[1]-t[1])+t[0],i,1]}function u(t,e){for(var i in e)t[i]=e[i];return t}function f(t,e,i){var n=t.source;if(1!==n.length)return!1;var r=n[0];if(3!==r.type||r.geometry.length>1)return!1;var o=r.geometry[0].length;if(5!==o)return!1;for(var s=0;o>s;s++){var a=l.point(r.geometry[0][s],e,t.z2,t.x,t.y);if(a[0]!==-i&&a[0]!==e+i||a[1]!==-i&&a[1]!==e+i)return!1}return!0}e.exports=n;var h=t("./convert"),l=t("./transform"),c=t("./clip"),p=t("./wrap"),d=t("./tile");r.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},r.prototype.splitTile=function(t,e,i,n,r,u,h){for(var l=[t,e,i,n],p=this.options,v=p.debug,g=null;l.length;){n=l.pop(),i=l.pop(),e=l.pop(),t=l.pop();var y=1<<e,m=o(e,i,n),x=this.tiles[m],w=e===p.maxZoom?0:p.tolerance/(y*p.extent);if(!x&&(v>1&&console.time("creation"),x=this.tiles[m]=d(t,y,i,n,w,e===p.maxZoom),this.tileCoords.push({z:e,x:i,y:n}),v)){v>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,n,x.numFeatures,x.numPoints,x.numSimplified),console.timeEnd("creation"));var _="z"+e;this.stats[_]=(this.stats[_]||0)+1,this.total++}if(x.source=t,r){if(e===p.maxZoom||e===r)continue;var b=1<<r-e;if(i!==Math.floor(u/b)||n!==Math.floor(h/b))continue}else if(e===p.indexMaxZoom||x.numPoints<=p.indexMaxPoints)continue;if(p.solidChildren||!f(x,p.extent,p.buffer)){x.source=null,v>1&&console.time("clipping");var M,L,E,F,V,S,P=.5*p.buffer/p.extent,k=.5-P,T=.5+P,C=1+P;M=L=E=F=null,V=c(t,y,i-P,i+T,0,s,x.min[0],x.max[0]),S=c(t,y,i+k,i+C,0,s,x.min[0],x.max[0]),V&&(M=c(V,y,n-P,n+T,1,a,x.min[1],x.max[1]),L=c(V,y,n+k,n+C,1,a,x.min[1],x.max[1])),S&&(E=c(S,y,n-P,n+T,1,a,x.min[1],x.max[1]),F=c(S,y,n+k,n+C,1,a,x.min[1],x.max[1])),v>1&&console.timeEnd("clipping"),M&&l.push(M,e+1,2*i,2*n),L&&l.push(L,e+1,2*i,2*n+1),E&&l.push(E,e+1,2*i+1,2*n),F&&l.push(F,e+1,2*i+1,2*n+1)}else r&&(g=e)}return g},r.prototype.getTile=function(t,e,i){var n=this.options,r=n.extent,s=n.debug,a=1<<t;e=(e%a+a)%a;var u=o(t,e,i);if(this.tiles[u])return l.tile(this.tiles[u],r);s>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var h,c=t,p=e,d=i;!h&&c>0;)c--,p=Math.floor(p/2),d=Math.floor(d/2),h=this.tiles[o(c,p,d)];if(!h||!h.source)return null;if(s>1&&console.log("found parent tile z%d-%d-%d",c,p,d),f(h,r,n.buffer))return l.tile(h,r);s>1&&console.time("drilling down");var v=this.splitTile(h.source,c,p,d,t,e,i);if(s>1&&console.timeEnd("drilling down"),null!==v){var g=1<<t-v;u=o(v,Math.floor(e/g),Math.floor(i/g))}return this.tiles[u]?l.tile(this.tiles[u],r):null}},{"./clip":1,"./convert":2,"./tile":5,"./transform":6,"./wrap":7}],4:[function(t,e,i){"use strict";function n(t,e){var i,n,o,s,a=e*e,u=t.length,f=0,h=u-1,l=[];for(t[f][2]=1,t[h][2]=1;h;){for(n=0,i=f+1;h>i;i++)o=r(t[i],t[f],t[h]),o>n&&(s=i,n=o);n>a?(t[s][2]=n,l.push(f),l.push(s),f=s):(h=l.pop(),f=l.pop())}}function r(t,e,i){var n=e[0],r=e[1],o=i[0],s=i[1],a=t[0],u=t[1],f=o-n,h=s-r;if(0!==f||0!==h){var l=((a-n)*f+(u-r)*h)/(f*f+h*h);l>1?(n=o,r=s):l>0&&(n+=f*l,r+=h*l)}return f=a-n,h=u-r,f*f+h*h}e.exports=n},{}],5:[function(t,e,i){"use strict";function n(t,e,i,n,o,s){for(var a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z2:e,transformed:!1,min:[2,1],max:[-1,0]},u=0;u<t.length;u++){a.numFeatures++,r(a,t[u],o,s);var f=t[u].min,h=t[u].max;f[0]<a.min[0]&&(a.min[0]=f[0]),f[1]<a.min[1]&&(a.min[1]=f[1]),h[0]>a.max[0]&&(a.max[0]=h[0]),h[1]>a.max[1]&&(a.max[1]=h[1])}return a}function r(t,e,i,n){var r,o,s,a,u=e.geometry,f=e.type,h=[],l=i*i;if(1===f)for(r=0;r<u.length;r++)h.push(u[r]),t.numPoints++,t.numSimplified++;else for(r=0;r<u.length;r++)if(s=u[r],n||!(2===f&&s.dist<i||3===f&&s.area<l)){var c=[];for(o=0;o<s.length;o++)a=s[o],(n||a[2]>l)&&(c.push(a),t.numSimplified++),t.numPoints++;h.push(c)}else t.numPoints+=s.length;h.length&&t.features.push({geometry:h,type:f,tags:e.tags||null})}e.exports=n},{}],6:[function(t,e,i){"use strict";function n(t,e){if(t.transformed)return t;var i,n,o,s=t.z2,a=t.x,u=t.y;for(i=0;i<t.features.length;i++){var f=t.features[i],h=f.geometry,l=f.type;if(1===l)for(n=0;n<h.length;n++)h[n]=r(h[n],e,s,a,u);else for(n=0;n<h.length;n++){var c=h[n];for(o=0;o<c.length;o++)c[o]=r(c[o],e,s,a,u)}}return t.transformed=!0,t}function r(t,e,i,n,r){var o=Math.round(e*(t[0]*i-n)),s=Math.round(e*(t[1]*i-r));return[o,s]}i.tile=n,i.point=r},{}],7:[function(t,e,i){"use strict";function n(t,e,i){var n=t,o=s(t,1,-1-e,e,0,i,-1,2),a=s(t,1,1-e,2+e,0,i,-1,2);return(o||a)&&(n=s(t,1,-e,1+e,0,i,-1,2),o&&(n=r(o,1).concat(n)),a&&(n=n.concat(r(a,-1)))),n}function r(t,e){for(var i=[],n=0;n<t.length;n++){var r,s=t[n],a=s.type;if(1===a)r=o(s.geometry,e);else{r=[];for(var u=0;u<s.geometry.length;u++)r.push(o(s.geometry[u],e))}i.push({geometry:r,type:a,tags:s.tags,min:[s.min[0]+e,s.min[1]],max:[s.max[0]+e,s.max[1]]})}return i}function o(t,e){var i=[];i.area=t.area,i.dist=t.dist;for(var n=0;n<t.length;n++)i.push([t[n][0]+e,t[n][1],t[n][2]]);return i}var s=t("./clip");e.exports=n},{"./clip":1}]},{},[3])(3)}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Pbf=t()}}(function(){return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return r(i?i:t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";function n(t){var e;t&&t.length&&(e=t,t=e.length);var i=new Uint8Array(t||0);return e&&i.set(e),i.readUInt32LE=o.readUInt32LE,i.writeUInt32LE=o.writeUInt32LE,i.readInt32LE=o.readInt32LE,i.writeInt32LE=o.writeInt32LE,i.readFloatLE=o.readFloatLE,i.writeFloatLE=o.writeFloatLE,i.readDoubleLE=o.readDoubleLE,i.writeDoubleLE=o.writeDoubleLE,i.toString=o.toString,i.write=o.write,i.slice=o.slice,i.copy=o.copy,i._isBuffer=!0,i}function r(t){for(var e,i,n=t.length,r=[],o=0;n>o;o++){if(e=t.charCodeAt(o),e>55295&&57344>e){if(!i){e>56319||o+1===n?r.push(239,191,189):i=e;continue}if(56320>e){r.push(239,191,189),i=e;continue}e=i-55296<<10|e-56320|65536,i=null}else i&&(r.push(239,191,189),i=null);128>e?r.push(e):2048>e?r.push(e>>6|192,63&e|128):65536>e?r.push(e>>12|224,e>>6&63|128,63&e|128):r.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}return r}e.exports=n;var o,s,a,u=t("ieee754");o={readUInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},writeUInt32LE:function(t,e){this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24},readInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+(this[t+3]<<24)},readFloatLE:function(t){return u.read(this,t,!0,23,4)},readDoubleLE:function(t){return u.read(this,t,!0,52,8)},writeFloatLE:function(t,e){return u.write(this,t,e,!0,23,4)},writeDoubleLE:function(t,e){return u.write(this,t,e,!0,52,8)},toString:function(t,e,i){var n="",r="";e=e||0,i=Math.min(this.length,i||this.length);for(var o=e;i>o;o++){var s=this[o];127>=s?(n+=decodeURIComponent(r)+String.fromCharCode(s),r=""):r+="%"+s.toString(16)}return n+=decodeURIComponent(r)},write:function(t,e){for(var i=t===s?a:r(t),n=0;n<i.length;n++)this[e+n]=i[n]},slice:function(t,e){return this.subarray(t,e)},copy:function(t,e){e=e||0;for(var i=0;i<this.length;i++)t[e+i]=this[i]}},o.writeInt32LE=o.writeUInt32LE,n.byteLength=function(t){return s=t,a=r(t),a.length},n.isBuffer=function(t){return!(!t||!t._isBuffer)}},{ieee754:3}],2:[function(t,e,i){(function(i){"use strict";function n(t){this.buf=g.isBuffer(t)?t:new g(t||0),this.pos=0,this.length=this.buf.length}function r(t,e){var i,n=e.buf;if(i=n[e.pos++],t+=268435456*(127&i),128>i)return t;if(i=n[e.pos++],t+=34359738368*(127&i),128>i)return t;if(i=n[e.pos++],t+=4398046511104*(127&i),128>i)return t;if(i=n[e.pos++],t+=562949953421312*(127&i),128>i)return t;if(i=n[e.pos++],t+=72057594037927940*(127&i),128>i)return t;if(i=n[e.pos++],t+=0x8000000000000000*(127&i),128>i)return t;throw new Error("Expected varint not more than 10 bytes")}function o(t,e){e.realloc(10);for(var i=e.pos+10;t>=1;){if(e.pos>=i)throw new Error("Given varint doesn't fit into 10 bytes");var n=255&t;e.buf[e.pos++]=n|(t>=128?128:0),t/=128}}function s(t,e,i){var n=16383>=e?1:2097151>=e?2:268435455>=e?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function a(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function h(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function l(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function v(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}e.exports=n;var g=i.Buffer||t("./buffer");n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var y=4294967296,m=1/y,x=Math.pow(2,63);n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos;t(r,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=this.buf.readUInt32LE(this.pos);return this.pos+=4,t},readSFixed32:function(){var t=this.buf.readInt32LE(this.pos);return this.pos+=4,t},readFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*y;return this.pos+=8,t},readSFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*y;return this.pos+=8,t},readFloat:function(){var t=this.buf.readFloatLE(this.pos);return this.pos+=4,t},readDouble:function(){var t=this.buf.readDoubleLE(this.pos);return this.pos+=8,t},readVarint:function(){var t,e,i=this.buf;return e=i[this.pos++],t=127&e,128>e?t:(e=i[this.pos++],t|=(127&e)<<7,128>e?t:(e=i[this.pos++],t|=(127&e)<<14,128>e?t:(e=i[this.pos++],t|=(127&e)<<21,128>e?t:r(t,this))))},readVarint64:function(){var t=this.pos,e=this.readVarint();if(x>e)return e;for(var i=this.pos-2;255===this.buf[i];)i--;t>i&&(i=t),e=0;for(var n=0;i-t+1>n;n++){var r=127&~this.buf[t+n];e+=4>n?r<<7*n:r*Math.pow(2,7*n)}return-e-1},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.buf.toString("utf8",this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.slice(this.pos,t);return this.pos=t,e},readPackedVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readVarint());return e},readPackedSVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new g(e);this.buf.copy(i),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(t){this.realloc(4),this.buf.writeUInt32LE(t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),this.buf.writeInt32LE(t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&t,this.pos),this.buf.writeUInt32LE(Math.floor(t*m),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&t,this.pos),this.buf.writeInt32LE(Math.floor(t*m),this.pos+4),this.pos+=8},writeVarint:function(t){return t=+t,t>268435455?void o(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),void(127>=t||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),127>=t||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),127>=t||(this.buf[this.pos++]=t>>>7&127)))))},writeSVarint:function(t){this.writeVarint(0>t?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t);var e=g.byteLength(t);this.writeVarint(e),this.realloc(e),this.buf.write(t,this.pos),this.pos+=e},writeFloat:function(t){this.realloc(4),this.buf.writeFloatLE(t,this.pos),this.pos+=4},writeDouble:function(t){this.realloc(8),this.buf.writeDoubleLE(t,this.pos),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;e>i;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&s(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,n.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,a,e)},writePackedSVarint:function(t,e){this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){this.writeMessage(t,l,e)},writePackedFloat:function(t,e){this.writeMessage(t,f,e)},writePackedDouble:function(t,e){this.writeMessage(t,h,e)},writePackedFixed32:function(t,e){this.writeMessage(t,c,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,p,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,v,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":1}],3:[function(t,e,i){i.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,u=(1<<a)-1,f=u>>1,h=-7,l=i?r-1:0,c=i?-1:1,p=t[e+l];for(l+=c,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=c,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+l],l+=c,h-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,n),o-=f}return(p?-1:1)*s*Math.pow(2,o-n)},i.write=function(t,e,i,n,r,o){var s,a,u,f=8*o-r-1,h=(1<<f)-1,l=h>>1,c=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,v=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?c/u:c*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,r),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,r),s=0));r>=8;t[i+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,f+=r;f>0;t[i+p]=255&s,p+=d,s/=256,f-=8);t[i+p-d]|=128*v}},{}]},{},[2])(2)}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.topojson=t.topojson||{})}(this,function(t){"use strict";function e(){}function i(t){if(!t)return e;var i,n,r=t.scale[0],o=t.scale[1],s=t.translate[0],a=t.translate[1];return function(t,e){e||(i=n=0),t[0]=(i+=t[0])*r+s,t[1]=(n+=t[1])*o+a}}function n(t){if(!t)return e;var i,n,r=t.scale[0],o=t.scale[1],s=t.translate[0],a=t.translate[1];return function(t,e){e||(i=n=0);var u=Math.round((t[0]-s)/r),f=Math.round((t[1]-a)/o);t[0]=u-i,t[1]=f-n,i=u,n=f}}function r(t,e){for(var i,n=t.length,r=n-e;r<--n;)i=t[r],t[r++]=t[n],t[n]=i}function o(t,e){for(var i=0,n=t.length;n>i;){var r=i+n>>>1;t[r]<e?i=r+1:n=r}return i}function s(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return a(t,e)})}:a(t,e)}function a(t,e){var i={type:"Feature",id:e.id,properties:e.properties||{},geometry:u(t,e)};return null==e.id&&delete i.id,i}function u(t,e){function n(t,e){e.length&&e.pop();for(var i,n=l[0>t?~t:t],o=0,s=n.length;s>o;++o)e.push(i=n[o].slice()),h(i,o);0>t&&r(e,s)}function o(t){return t=t.slice(),h(t,0),t}function s(t){for(var e=[],i=0,r=t.length;r>i;++i)n(t[i],e);return e.length<2&&e.push(e[0].slice()),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0].slice());return e}function u(t){return t.map(a)}function f(t){var e=t.type;return"GeometryCollection"===e?{type:e,geometries:t.geometries.map(f)}:e in c?{type:e,coordinates:c[e](t)}:null}var h=i(t.transform),l=t.arcs,c={Point:function(t){return o(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(o)},LineString:function(t){return s(t.arcs)},MultiLineString:function(t){return t.arcs.map(s)},Polygon:function(t){return u(t.arcs)},MultiPolygon:function(t){return t.arcs.map(u)}};return f(e)}function f(t,e){function i(e){var i,n=t.arcs[0>e?~e:e],r=n[0];return t.transform?(i=[0,0],n.forEach(function(t){i[0]+=t[0],i[1]+=t[1]})):i=n[n.length-1],0>e?[i,r]:[r,i]}function n(t,e){for(var i in t){var n=t[i];delete e[n.start],delete n.start,delete n.end,n.forEach(function(t){r[0>t?~t:t]=1}),a.push(n)}}var r={},o={},s={},a=[],u=-1;return e.forEach(function(i,n){var r,o=t.arcs[0>i?~i:i];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++u],e[u]=i,e[n]=r)}),e.forEach(function(t){var e,n,r=i(t),a=r[0],u=r[1];if(e=s[a])if(delete s[e.end],e.push(t),e.end=u,n=o[u]){delete o[n.start];var f=n===e?e:e.concat(n);o[f.start=e.start]=s[f.end=n.end]=f}else o[e.start]=s[e.end]=e;else if(e=o[u])if(delete o[e.start],e.unshift(t),e.start=a,n=s[a]){delete s[n.end];var h=n===e?e:n.concat(e);o[h.start=n.start]=s[h.end=e.end]=h}else o[e.start]=s[e.end]=e;else e=[t],o[e.start=a]=s[e.end=u]=e}),n(s,o),n(o,s),e.forEach(function(t){r[0>t?~t:t]||a.push([t])}),a}function h(t){return u(t,l.apply(this,arguments))}function l(t,e,i){function n(t){var e=0>t?~t:t;(h[e]||(h[e]=[])).push({i:t,g:u})}function r(t){t.forEach(n)}function o(t){t.forEach(r)}function s(t){"GeometryCollection"===t.type?t.geometries.forEach(s):t.type in l&&(u=t,l[t.type](t.arcs))}var a=[];if(arguments.length>1){var u,h=[],l={LineString:r,MultiLineString:o,Polygon:o,MultiPolygon:function(t){t.forEach(o)}};s(e),h.forEach(arguments.length<3?function(t){a.push(t[0].i)}:function(t){i(t[0].g,t[t.length-1].g)&&a.push(t[0].i)})}else for(var c=0,p=t.arcs.length;p>c;++c)a.push(c);return{type:"MultiLineString",arcs:f(t,a)}}function c(t){var e=t[0],i=t[1],n=t[2];return Math.abs((e[0]-n[0])*(i[1]-e[1])-(e[0]-i[0])*(n[1]-e[1]))}function p(t){for(var e,i=-1,n=t.length,r=t[n-1],o=0;++i<n;)e=r,r=t[i],o+=e[0]*r[1]-e[1]*r[0];return o/2}function d(t){return u(t,v.apply(this,arguments))}function v(t,e){function i(t){t.forEach(function(e){e.forEach(function(e){(r[e=0>e?~e:e]||(r[e]=[])).push(t)})}),o.push(t)}function n(e){return Math.abs(p(u(t,{type:"Polygon",arcs:[e]}).coordinates[0]))}var r={},o=[],s=[];return e.forEach(function(t){"Polygon"===t.type?i(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(i)}),o.forEach(function(t){if(!t._){var e=[],i=[t];for(t._=1,s.push(e);t=i.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){r[0>t?~t:t].forEach(function(t){t._||(t._=1,i.push(t))})})})}}),o.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:s.map(function(e){var i,o=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){r[0>t?~t:t].length<2&&o.push(t)})})}),o=f(t,o),(i=o.length)>1)for(var s,a,u=1,h=n(o[0]);i>u;++u)(s=n(o[u]))>h&&(a=o[0],o[0]=o[u],o[u]=a,h=s);return o})}}function g(t){function e(t,e){t.forEach(function(t){0>t&&(t=~t);var i=r[t];i?i.push(e):r[t]=[e]})}function i(t,i){t.forEach(function(t){e(t,i)})}function n(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){n(t,e)}):t.type in a&&a[t.type](t.arcs,e)}var r={},s=t.map(function(){return[]}),a={LineString:e,MultiLineString:i,Polygon:i,MultiPolygon:function(t,e){t.forEach(function(t){i(t,e)})}};t.forEach(n);for(var u in r)for(var f=r[u],h=f.length,l=0;h>l;++l)for(var c=l+1;h>c;++c){var p,d=f[l],v=f[c];(p=s[d])[u=o(p,v)]!==v&&p.splice(u,0,v),(p=s[v])[u=o(p,d)]!==d&&p.splice(u,0,d)}return s}function y(t,e){return t[1][2]-e[1][2]}function m(){function t(t,e){for(;e>0;){var i=(e+1>>1)-1,r=n[i];if(y(t,r)>=0)break;n[r._=e]=r,n[t._=e=i]=t}}function e(t,e){for(;;){var i=e+1<<1,o=i-1,s=e,a=n[s];if(r>o&&y(n[o],a)<0&&(a=n[s=o]),r>i&&y(n[i],a)<0&&(a=n[s=i]),s===e)break;n[a._=e]=a,n[t._=e=s]=t}}var i={},n=[],r=0;return i.push=function(e){return t(n[e._=r]=e,r++),r},i.pop=function(){if(!(0>=r)){var t,i=n[0];return--r>0&&(t=n[r],e(n[t._=0]=t,0)),i}},i.remove=function(i){var o,s=i._;if(n[s]===i)return s!==--r&&(o=n[r],(y(o,i)<0?t:e)(n[o._=s]=o,s)),s},i}function x(t,e){function r(t){a.remove(t),t[1][2]=e(t),a.push(t)}var o=i(t.transform),s=n(t.transform),a=m();return e||(e=c),t.arcs.forEach(function(t){var i,n,u,f,h=[],l=0;for(n=0,u=t.length;u>n;++n)f=t[n],o(t[n]=[f[0],f[1],1/0],n);for(n=1,u=t.length-1;u>n;++n)i=t.slice(n-1,n+2),i[1][2]=e(i),h.push(i),a.push(i);for(n=0,u=h.length;u>n;++n)i=h[n],i.previous=h[n-1],i.next=h[n+1];for(;i=a.pop();){var c=i.previous,p=i.next;i[1][2]<l?i[1][2]=l:l=i[1][2],c&&(c.next=p,c[2]=i[2],r(c)),p&&(p.previous=c,p[0]=i[0],r(p))}t.forEach(s)}),t}var w="1.6.26";t.version=w,t.mesh=h,t.meshArcs=l,t.merge=d,t.mergeArcs=v,t.feature=s,t.neighbors=g,t.presimplify=x}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.vectorTile=t()}}(function(){return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return r(i?i:t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":2,"./lib/vectortilefeature.js":3,"./lib/vectortilelayer.js":4}],2:[function(t,e,i){"use strict";function n(t,e){this.layers=t.readFields(r,{},e)}function r(t,e,i){if(3===t){var n=new o(i,i.readVarint()+i.pos);n.length&&(e[n.name]=n)}}var o=t("./vectortilelayer");e.exports=n},{"./vectortilelayer":4}],3:[function(t,e,i){"use strict";function n(t,e,i,n,o){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=o,t.readFields(r,this,e)}function r(t,e,i){1==t?e._id=i.readVarint():2==t?o(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function o(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}function s(t){var e=t.length;if(1>=e)return[t];for(var i,n,r=[],o=0;e>o;o++){var s=a(t[o]);0!==s&&(void 0===n&&(n=0>s),n===0>s?(i&&r.push(i),i=[t[o]]):i.push(t[o]))}return i&&r.push(i),r}function a(t){for(var e,i,n=0,r=0,o=t.length,s=o-1;o>r;s=r++)e=t[r],i=t[s],n+=(i.x-e.x)*(e.y+i.y);return n}var u=t("point-geometry");e.exports=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,r=0,o=0,s=0,a=[];t.pos<i;){if(!r){var f=t.readVarint();n=7&f,r=f>>3}if(r--,1===n||2===n)o+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&a.push(e),e=[]),e.push(new u(o,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&a.push(e),a},n.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,n=0,r=0,o=0,s=1/0,a=-(1/0),u=1/0,f=-(1/0);t.pos<e;){if(!n){var h=t.readVarint();i=7&h,n=h>>3}if(n--,1===i||2===i)r+=t.readSVarint(),o+=t.readSVarint(),s>r&&(s=r),r>a&&(a=r),u>o&&(u=o),o>f&&(f=o);else if(7!==i)throw new Error("unknown command "+i)}return[s,u,a,f]},n.prototype.toGeoJSON=function(t,e,i){function r(t){for(var e=0;e<t.length;e++){var i=t[e],n=180-360*(i.y+h)/u;t[e]=[360*(i.x+f)/u-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}var o,a,u=this.extent*Math.pow(2,i),f=this.extent*t,h=this.extent*e,l=this.loadGeometry(),c=n.types[this.type];switch(this.type){case 1:var p=[];for(o=0;o<l.length;o++)p[o]=l[o][0];l=p,r(l);break;case 2:for(o=0;o<l.length;o++)r(l[o]);break;case 3:for(l=s(l),o=0;o<l.length;o++)for(a=0;a<l[o].length;a++)r(l[o][a])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"_id"in this&&(d.id=this._id),d}},{"point-geometry":5}],4:[function(t,e,i){"use strict";function n(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(r,this,e),this.length=this._features.length}function r(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(o(i))}function o(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}var s=t("./vectortilefeature.js");e.exports=n,n.prototype.feature=function(t){if(0>t||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new s(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":3}],5:[function(t,e,i){"use strict";function n(t,e){this.x=t,this.y=e}e.exports=n,n.prototype={clone:function(){return new n(this.x,this.y)},add:function(t){
return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=e*this.x-i*this.y,r=i*this.x+e*this.y;return this.x=n,this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t}},{}]},{},[1])(1)}),L.SVG.Tile=L.SVG.extend({initialize:function(t,e){L.SVG.prototype.initialize.call(this,e),this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" "))},getContainer:function(){return this._container},onAdd:L.Util.FalseFn,_initContainer:function(){L.SVG.prototype._initContainer.call(this);L.SVG.create("rect")},_initPath:function(t){function e(e,n){i.addEventListener(e,function(i){n({type:e,target:t,latlng:t._map.mouseEventToLatLng(i)})})}L.SVG.prototype._initPath.call(this,t);var i=t._path;"function"==typeof t._onClick&&(2===t.type?i.setAttribute("pointer-events","stroke"):3===t.type?i.setAttribute("pointer-events","fill"):1===t.type&&i.setAttribute("pointer-events","painted"),e("click",t._onClick)),"function"==typeof t._onMouseUp&&e("mouseup",t._onMouseUp),"function"==typeof t._onMouseDown&&e("mousedown",t._onMouseDown),"function"==typeof t._onMouseMove&&e("mousemove",t._onMouseMove),"function"==typeof t._onMouseOver&&e("mouseover",t._onMouseOver),"function"==typeof t._onMouseOut&&e("mouseout",t._onMouseOut)},_addPath:function(t){this._rootGroup.appendChild(t._path)}}),L.svg.tile=function(t,e){return new L.SVG.Tile(t,e)},L.Canvas.Tile=L.Canvas.extend({initialize:function(t,e){L.Canvas.prototype.initialize.call(this,e),this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={}},getContainer:function(){return this._container},onAdd:L.Util.FalseFn,_initContainer:function(){var t=this._container=document.createElement("canvas");this._ctx=t.getContext("2d")},_initPath:function(t){L.Canvas.prototype._initPath.call(this,t);var e=t._path;"function"==typeof t.onClick&&(2===t.type?e.setAttribute("pointer-events","stroke"):3===t.type?e.setAttribute("pointer-events","fill"):1===t.type&&e.setAttribute("pointer-events","painted"),e.addEventListener("click",function(e){t.onClick({type:"click",target:t})}))}}),L.canvas.tile=function(t,e){return new L.Canvas.Tile(t,e)},L.VectorGrid=L.GridLayer.extend({options:{rendererFactory:L.svg.tile,vectorTileLayerStyles:{}},createTile:function(t,e){var i=this.options.rendererFactory(this.getTileSize(),this.options),n=this._getVectorTilePromise(t);return n.then(function(n){for(var r in n.layers){var o=n.layers[r],s=this.getTileSize().x/o.extent,a=this.options.vectorTileLayerStyles[r]||L.Path.prototype.options,u=getEventHandler(r,this.options.onClick),f=getEventHandler(r,this.options.onMouseDown),h=getEventHandler(r,this.options.onMouseUp),l=getEventHandler(r,this.options.onMouseOver),c=getEventHandler(r,this.options.onMouseMove),p=getEventHandler(r,this.options.onMouseOut);for(var d in o.features){var v=o.features[d];if(v.type>1){this._mkFeatureParts(v,s);var g=a instanceof Function?a(v.properties,t.z):a;g instanceof Array||(g=[g]),v._map=this._map,v.getLayerName=function(){return r},v.getCoords=function(){return t},v._onClick=u,v._onMouseMove=c,v._onMouseDown=f,v._onMouseUp=h,v._onMouseOver=l,v._onMouseOut=p;for(var y in g){var m=L.extend({},L.Path.prototype.options,g[y]);1===v.type?m.fill=!1:2===v.type&&(m.fill=!1),v.options=m,i._initPath(v),i._updateStyle(v),1===v.type||(2===v.type?(m.fill=!1,i._updatePoly(v,!1)):3===v.type&&i._updatePoly(v,!0)),i._addPath(v)}}}}L.Util.requestAnimFrame(e)}.bind(this)),i.getContainer()},_mkFeatureParts:function(t,e){var i=t.geometry;t._parts=[];for(var n in i){var r=i[n],o=[];for(var s in r){var a=r[s];"x"in a?o.push(L.point(a.x*e,a.y*e)):o.push(L.point(a[0]*e,a[1]*e))}t._parts.push(o)}}}),L.vectorGrid=function(t){return new L.VectorGrid(t)},L.VectorGrid.Slicer=L.VectorGrid.extend({options:{vectorTileLayerName:"sliced",extent:4096,maxZoom:14},initialize:function(t,e){if(L.VectorGrid.prototype.initialize.call(this,e),this._slicers={},t.type&&"Topology"===t.type)for(var i in t.objects)this._slicers[i]=geojsonvt(topojson.feature(t,t.objects[i]),this.options);else this._slicers[this.options.vectorTileLayerName]=geojsonvt(t,this.options)},_getVectorTilePromise:function(t){var e={};for(var i in this._slicers){var n=this._slicers[i],r=n.getTile(t.z,t.x,t.y);if(r){var o={features:[],extent:this.options.extent,name:this.options.vectorTileLayerName,length:r.features.length};for(var s in r.features){var a={geometry:r.features[s].geometry,properties:r.features[s].tags,type:r.features[s].type};o.features.push(a)}e[i]=o}}return new Promise(function(t){return t({layers:e})})}}),L.vectorGrid.slicer=function(t,e){return new L.VectorGrid.Slicer(t,e)},L.VectorGrid.Protobuf=L.VectorGrid.extend({options:{subdomains:"abc"},initialize:function(t,e){this._url=t,L.VectorGrid.prototype.initialize.call(this,e)},_getSubdomain:L.TileLayer.prototype._getSubdomain,_getVectorTilePromise:function(t){var e=L.Util.template(this._url,L.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:t.z},this.options));return fetch(e).then(function(t){return t.ok?t.blob().then(function(t){var e=new FileReader;return new Promise(function(i){e.addEventListener("loadend",function(){var t=new Pbf(e.result);return i(new vectorTile.VectorTile(t))}),e.readAsArrayBuffer(t)})}):{layers:[]}}).then(function(t){for(var e in t.layers){for(var i=[],n=0;n<t.layers[e].length;n++){var r=t.layers[e].feature(n);r.geometry=r.loadGeometry(),i.push(r)}t.layers[e].features=i}return t})}}),L.vectorGrid.protobuf=function(t,e){return new L.VectorGrid.Protobuf(t,e)};
//# sourceMappingURL=Leaflet.VectorGrid.bundled.min.js.map
